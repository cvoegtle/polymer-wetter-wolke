<dom-module id="wetter-statistics">
  <style>
    :host {
      display: block;
    }

    @media (max-width: 600px) {
    }

    .statistics_table {
      margin: 15px;
      font-size: 13px;
    }

    .statistics_caption {
      width: 62px;
      text-align: right;
    }

    .statistics_caption_narrow {
      width: 48px;
      text-align: right;
    }

    .statistics_caption2 {
      width: 70px;
      text-align: right;
    }

    .statistics_value {
      text-align: right;
      padding-left: 3px;
    }

    .caption {
      width: 57px;
      font-weight: bold;
    }

  </style>
  <template>
      <paper-material elevation="1">
        <table class="statistics_table">
          <tr class="caption paper-font-body2">
            <td></td>
            <td class="statistics_caption_narrow">Regen</td>
            <td class="statistics_caption">Tmin</td>
            <td class="statistics_caption">Tmax</td>
            <td class="statistics_caption2">[[kwhCaption]]</td>
          </tr>
          <template is="dom-repeat" items="[[statistic.stats]]">
            <template is="dom-if" if="[[translate(item.range)]]">
              <tr class="paper-font-body2">
                <td class="caption">[[translate(item.range)]]</td>
                <td class="statistics_value">[[format(item.rain, 'l')]]</td>
                <td class="statistics_value">[[format(item.minTemperature, '°C')]]</td>
                <td class="statistics_value">[[format(item.maxTemperature, '°C')]]</td>
                <td class="statistics_value">[[formatKwh(item.kwh)]]</td>
              </tr>
            </template>
          </template>
        </table>
      </paper-material>
    </template>

</dom-module>
<script>
  (function () {
    Polymer({
      is: 'wetter-statistics',

      properties: {
        statistic: Object,
        kwhCaption: {
          type: String,
          value: ''
        }
      },

      format: function (value, unit) {
        if (value !== '') {
          var result = value.toFixed(1);
          return result.replace('.', ',') + ' ' + unit;

        } else {
          return '';
        }
      },

      formatKwh: function (val) {
        if (val !== undefined && val !== '') {
          this.kwhCaption = 'Ertrag';
          return this.format(val, 'kWh');
        }
        return '';
      },

      translate: function (range) {
        var translatedRange;
        if (range === 'today') {
          translatedRange = 'heute';
        } else if (range === 'yesterday') {
          translatedRange = 'gestern';
        } else if (range === 'last7days') {
          translatedRange = '7 Tage';
        } else if (range === 'last30days') {
          translatedRange = '30 Tage';
        }
        return translatedRange;
      },

    inspect: function(o){
      var objectToInspect;
      var result = [];

      for(objectToInspect = o; objectToInspect !== null; objectToInspect = Object.getPrototypeOf(objectToInspect)){
        result = result.concat(Object.getOwnPropertyNames(objectToInspect));
      }

      return result;
    }


    });
  })();
</script>

